@model MicroStore.IdentityProvider.Host.Areas.BackEnd.Models.Clients.EditClientUIModel

<div class="content-wrapper mr-2">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1 class="m-0">Edit Client</h1>
                </div><!-- /.col -->
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item">
                            <button class="btn btn-info" type="button" id="EditFormButton">
                                <i class="fas
                                fa-plus-square mr-1"></i> Save
                            </button>
                        </li>
                    </ol>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <div class="content">
        <div class="container-fluid">
            <form method="post" asp-action="Edit" id="EditForm">
                @Html.AntiForgeryToken()
                @Html.HiddenFor(x=> x.Id, new {id= "ClientId"})
                <div class="text-center mb-3">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                </div>
                <partial name="_Edit.Client.Info" model="Model" />
                <partial name="_Edit.Client.Uris" model="Model" />
                
                <partial name="_Edit.Client.Advanced" model="Model" />
                <partial name="_Client.Scopes" model="Model" />
            </form>

                <partial name="IdentityServer/Grids/_Grids.Property"  />
                <partial name="Grids/_Grids.Claims"   />
        </div>
    </div>


</div>

@section Scripts{
    <script src="~/js/backend/client/edit.js"> </script>
<script src="~/js/backend/grids/propertygrid.js"> </script>

<script>
    $(document).ready(function(){
        $("SaveButton").on('click',function(){
            $("#ApiScopeForm").submit();
        })

        propertyGrid.init({
            parentId : "@(Model.Id)",
            listAction:{
                url : '@Url.Action("ListProperties", new {id = @Model.Id})',
                type:"POST"
            },
            deleteAction:{
                url : '@Url.Action("DeleteProperty")',
                type : "POST"
            },

            createModal :{
                viewUrl : '@Url.Action("CreatePropertyModal")'
            },

            editModal:{
                viewUrl : '@Url.Action("EditPropertyModal")'
            }

        });

        $("#EditFormButton").on('click',function(){
            $("#EditForm").submit();
        })

        $("#ScopeSelect").bootstrapDualListbox();
    })


</script>
}

