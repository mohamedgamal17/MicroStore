@model MicroStore.IdentityProvider.IdentityServer.Web.Areas.BackEnd.Models.Clients.EditClientModel
@{
    ViewData["Title"] = "Edit Client / Backend";
    UIMenuNavigationManager.SetCurrentMenu(IdentityServerMenuStandard.ClientMenu.Edit);
}
<div class="content-wrapper mr-2">
    <div class="content-header">
        <div class="container-fluid">
            <abp-row class=" mb-2">
                <abp-column size-sm="_6">
                    <h1 class="m-0">Edit Client</h1>
                </abp-column>
                <abp-column size-sm="_6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item">
                            <button class="btn btn-info" type="button" id="EditFormButton">
                                <i class="fas
                                fa-plus-square mr-1"></i> Save
                            </button>
                        </li>
                    </ol>
                </abp-column>
            </abp-row>
        </div>
    </div>
    <div class="content">
        <div class="container-fluid">
            <form method="post" asp-action="Edit" id="EditForm">
                @Html.AntiForgeryToken()
                @Html.HiddenFor(x=> x.Id, new {id= "ClientId"})
                <div class="text-center mb-3">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                </div>
                <partial name="_Edit.Client.Info" model="Model" />
                <partial name="_Edit.Client.Uris" model="Model" />            
                <partial name="_Edit.Client.Token" model="Model" />
                <partial name="_Edit.Client.Grants" model="Model" />
                <partial name="_Client.Scopes" model="Model" />
            </form>
                <partial name="Grids/_Grids.Secrets"  />
                 <partial name="Grids/_Grids.Claims" />
                <partial name="_Grids.Property"  />
           
        </div>
    </div>


</div>

@section Scripts{
    <script src="~/backend/js/client/edit.js"> </script>
    <script src="~/backend/js/grids/propertygrid.js"> </script>

<script>
    $(document).ready(function(){

        propertyGrid.init({
            parentId : "@(Model.Id)",
            listAction:{
                url : '@Url.Action("ListProperties", new {parentId = @Model.Id})',
                type:"POST"
            },
            deleteAction:{
                url : '@Url.Action("DeleteProperty")',
                type : "POST"
            },

            createModal :{
                viewUrl : '@Url.Action("CreatePropertyModal")'
            },

            editModal:{
                viewUrl : '@Url.Action("EditPropertyModal")'
            }

        });

        $("#EditFormButton").on('click',function(){
              $("#EditForm").submit();
        })

        $("#ScopeSelect").bootstrapDualListbox();
    })


</script>
}

