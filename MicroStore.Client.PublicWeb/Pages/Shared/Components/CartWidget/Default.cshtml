@model MicroStore.ShoppingGateway.ClinetSdk.Entities.Cart.BasketAggregate

<div id="shopping-cart" class="nav-link">

	@if (Model == null)
	{
		<span class="cart-error" style="vertical-align: -webkit-baseline-middle;color: white" > Error In Loading Basket </span>
	}
	else
	{
		<div class="dropdown">
			<a class="btn nav-link dropdown-toggle" id="shopping-cart-link" data-bs-toggle="dropdown" style="padding:0px" role="button" href="#">
				<span abp-badge="Info" data-cart-count>@Model.Items.Sum(x=> x.Quantity)</span> Cart11
			</a>

			<div class="dropdown-menu dropdown-menu-end border-0 shadow-sm cart-preview" aria-labelledby="shopping-cart-link" style="width:300px!important; max-width300px">

				@if (!Model.Items.Any())
				{
					<div class="p-3 text-center">
						<h3>
							<i class="fas fa-shopping-cart"></i>
						</h3>
						<div>
							<span>
								Cart is Empty
							</span>
						</div>
					</div>
				}
				else
				{
					foreach (var item in Model.Items)
					{
						string imageName = item.Thumbnail ?? "/user-content/no-image.png";
					    var price = item.Price.ToString("0.00");
						<div class="dropdown-item overflow-hidden">

							<abp-row>
								<abp-column size="_3" class="overflow-hidden">
									<img class="basket-item-preview-image m-1 my-2" src="@imageName" />
								</abp-column>
								<abp-column size="_9">
									<p class="mt-2 mb-0"><strong>@item.Name</strong></p>
									<p>$@item.Price</p>
								</abp-column>
							</abp-row>
						</div>
					}

					<div>
						<div class="d-grid gap-2 m-2">
							<a asp-page="/Cart" class="btn btn-outline-warning text-center">
								My Cart
							</a>
						</div>
					</div>
				}

			</div>
		</div>
	}
</div>